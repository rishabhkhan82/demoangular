import{a as B,b as W,d as X}from"./chunk-4DMJINZG.js";import{Aa as H,B as n,Ba as z,C as a,D as E,H as g,M as l,N as f,ba as M,e as _,fa as N,g as k,ga as R,h as v,ia as F,j as L,k as V,ka as D,la as h,ma as w,na as P,oa as b,pa as O,qa as T,ra as j,s as m,sa as G,t as c,ta as I,ua as $,w as p,wa as q,xa as o,ya as U,za as d}from"./chunk-FXZP24SL.js";var x=class s{constructor(){}static emailValidator(){return t=>t.value?d.EMAIL.test(t.value)?null:{email:{message:o.INVALID_EMAIL}}:null}static phoneValidator(){return t=>t.value?d.PHONE.test(t.value)?null:{phone:{message:o.INVALID_PHONE}}:null}static passwordValidator(){return t=>t.value?d.PASSWORD.test(t.value)?null:{password:{message:o.INVALID_PASSWORD}}:null}static confirmPasswordValidator(t){return e=>{if(!e.value)return null;let r=e.parent;if(!r)return null;let i=r.get(t);return i?e.value===i.value?null:{confirmPassword:{message:o.PASSWORDS_NOT_MATCH}}:null}}static minLengthValidator(t){return e=>e.value?e.value.length>=t?null:{minLength:{message:`${o.MIN_LENGTH} ${t} characters`,requiredLength:t,actualLength:e.value.length}}:null}static maxLengthValidator(t){return e=>e.value?e.value.length<=t?null:{maxLength:{message:`${o.MAX_LENGTH} ${t} characters`,requiredLength:t,actualLength:e.value.length}}:null}static patternValidator(t,e){return r=>r.value?(typeof t=="string"?new RegExp(t):t).test(r.value)?null:{pattern:{message:e||o.INVALID_FORMAT,requiredPattern:t,actualValue:r.value}}:null}static numericValidator(){return t=>t.value?d.NUMERIC.test(t.value)?null:{numeric:{message:"Only numbers are allowed"}}:null}static alphanumericValidator(){return t=>t.value?d.ALPHANUMERIC.test(t.value)?null:{alphanumeric:{message:"Only letters and numbers are allowed"}}:null}static urlValidator(){return t=>{if(!t.value)return null;try{return new URL(t.value),null}catch{return{url:{message:"Please enter a valid URL"}}}}}static dateRangeValidator(t,e){return r=>{let i=r.parent;if(!i)return null;let u=i.get(t),A=i.get(e);if(!u||!A||!u.value||!A.value)return null;let Q=new Date(u.value),Y=new Date(A.value);return Q<=Y?null:{dateRange:{message:"End date must be after start date"}}}}static fileTypeValidator(t){return e=>{if(!e.value)return null;let r=e.value;return!r||!r.type||t.includes(r.type)?null:{fileType:{message:`Allowed file types: ${t.join(", ")}`,allowedTypes:t,actualType:r.type}}}}static fileSizeValidator(t){return e=>{if(!e.value)return null;let r=e.value;return!r||!r.size||r.size<=t?null:{fileSize:{message:`File size must be less than ${this.formatFileSize(t)}`,maxSize:t,actualSize:r.size}}}}static formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,r=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,i)).toFixed(2))+" "+r[i]}validateField(t,e){let r={};if(e.required&&(!t||t.toString().trim()==="")&&(r.required=o.REQUIRED),!t||t.toString().trim()==="")return{isValid:Object.keys(r).length===0,errors:r};if(typeof t=="string"&&(e.minLength&&t.length<e.minLength&&(r.minLength=`${o.MIN_LENGTH} ${e.minLength} characters`),e.maxLength&&t.length>e.maxLength&&(r.maxLength=`${o.MAX_LENGTH} ${e.maxLength} characters`),e.pattern&&((typeof e.pattern=="string"?new RegExp(e.pattern):e.pattern).test(t)||(r.pattern=o.INVALID_FORMAT)),e.email&&!d.EMAIL.test(t)&&(r.email=o.INVALID_EMAIL),e.phone&&!d.PHONE.test(t)&&(r.phone=o.INVALID_PHONE),e.password&&!d.PASSWORD.test(t)&&(r.password=o.INVALID_PASSWORD),e.url))try{new URL(t)}catch{r.url="Please enter a valid URL"}if(typeof t=="number"||!isNaN(Number(t))){let i=Number(t);e.min!==void 0&&i<e.min&&(r.min=`Value must be at least ${e.min}`),e.max!==void 0&&i>e.max&&(r.max=`Value must be at most ${e.max}`)}if(e.custom){let i=e.custom(t);i!==!0&&(r.custom=typeof i=="string"?i:"Invalid value")}return{isValid:Object.keys(r).length===0,errors:r}}validateFormGroup(t){let e={};return Object.keys(t.controls).forEach(r=>{let i=t.get(r);i&&i.errors&&(e[r]=this.getErrorMessage(i.errors))}),{isValid:Object.keys(e).length===0,errors:e}}getErrorMessage(t){let e=Object.keys(t);if(e.length===0)return"";let r=t[e[0]];if(r&&r.message)return r.message;switch(e[0]){case"required":return o.REQUIRED;case"email":return o.INVALID_EMAIL;case"phone":return o.INVALID_PHONE;case"password":return o.INVALID_PASSWORD;case"minlength":return`${o.MIN_LENGTH} ${r.requiredLength} characters`;case"maxlength":return`${o.MAX_LENGTH} ${r.requiredLength} characters`;case"min":return`Value must be at least ${r.min}`;case"max":return`Value must be at most ${r.max}`;case"pattern":return o.INVALID_FORMAT;default:return"Invalid value"}}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{let r=t.get(e);r instanceof b?this.markFormGroupTouched(r):r instanceof I?r.controls.forEach(i=>{i instanceof b?this.markFormGroupTouched(i):i.markAsTouched()}):r?.markAsTouched()})}hasErrors(t){return Object.keys(t.controls).some(e=>{let r=t.get(e);return r?.errors&&r?.touched})}getAllFormErrors(t){let e={};return Object.keys(t.controls).forEach(r=>{let i=t.get(r);i?.errors&&i?.touched&&(e[r]=this.getErrorMessage(i.errors))}),e}resetFormValidation(t){Object.keys(t.controls).forEach(e=>{let r=t.get(e);r instanceof b?this.resetFormValidation(r):r instanceof I?r.controls.forEach(i=>{i instanceof b?this.resetFormValidation(i):(i.markAsUntouched(),i.markAsPristine())}):(r?.markAsUntouched(),r?.markAsPristine())})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=k({token:s,factory:s.\u0275fac,providedIn:"root"})};var y=class s{constructor(t,e,r,i,u){this.fb=t;this.router=e;this.authService=r;this.errorService=i;this.validationService=u}loginForm;loading=!1;showPassword=!1;demoCredentials=U;ngOnInit(){this.initializeForm(),this.fillDemoCredentials("SUPER_ADMIN")}initializeForm(){this.loginForm=this.fb.group({email:["",[h.required,h.email]],password:["",[h.required,h.minLength(6)]],rememberMe:[!1]})}fillDemoCredentials(t){let e=this.demoCredentials[t];this.loginForm.patchValue({email:e.email,password:e.password})}togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){if(this.loginForm.invalid){this.validationService.markFormGroupTouched(this.loginForm);return}this.loading=!0;let t=this.loginForm.value;this.authService.login(t).pipe(_(()=>{this.loading=!1})).subscribe({next:e=>{this.errorService.showSuccess("Login successful!")},error:e=>{this.errorService.showError(e.message||"Login failed. Please try again.")}})}getFieldError(t){let e=this.loginForm.get(t);if(e&&e.errors&&e.touched){if(e.errors.required)return`${t} is required`;if(e.errors.email)return"Please enter a valid email address";if(e.errors.minlength)return`${t} must be at least ${e.errors.minlength.requiredLength} characters long`}return null}isFieldInvalid(t){let e=this.loginForm.get(t);return!!(e&&e.errors&&(e.dirty||e.touched))}static \u0275fac=function(e){return new(e||s)(c($),c(N),c(z),c(H),c(x))};static \u0275cmp=L({type:s,selectors:[["app-login"]],decls:49,vars:13,consts:[[1,"text-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-600","dark:text-gray-400"],[1,"mb-6","p-4","bg-blue-50","dark:bg-blue-900/20","rounded-lg","border","border-blue-200","dark:border-blue-800"],[1,"text-sm","font-semibold","text-blue-800","dark:text-blue-300","mb-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2","text-xs"],["type","button",1,"text-left","p-2","bg-white","dark:bg-gray-800","rounded","border","hover:bg-gray-50","dark:hover:bg-gray-700","transition-colors",3,"click"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"text-gray-500","dark:text-gray-400"],[1,"space-y-6",3,"ngSubmit","formGroup"],["type","email","placeholder","Enter your email","label","Email Address","icon","envelope","iconPosition","left","formControlName","email","autocomplete","email",3,"errorText","required"],["placeholder","Enter your password","label","Password","icon","lock","iconPosition","left","formControlName","password","autocomplete","current-password",3,"type","errorText","required"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["type","checkbox","formControlName","rememberMe",1,"h-4","w-4","text-primary-600","focus:ring-primary-500","border-gray-300","rounded"],[1,"ml-2","text-sm","text-gray-600","dark:text-gray-400"],["href","#",1,"text-sm","text-primary-600","hover:text-primary-500","dark:text-primary-400","dark:hover:text-primary-300","transition-colors"],["type","submit","variant","primary","size","lg",3,"fullWidth","loading","disabled"],[1,"mt-6","text-center"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/auth/register",1,"text-primary-600","hover:text-primary-500","dark:text-primary-400","dark:hover:text-primary-300","transition-colors","font-medium"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h2",1),l(2," Welcome Back "),a(),n(3,"p",2),l(4," Sign in to your admin account "),a()(),n(5,"div",3)(6,"h3",4),l(7,"Demo Credentials:"),a(),n(8,"div",5)(9,"button",6),g("click",function(){return r.fillDemoCredentials("SUPER_ADMIN")}),n(10,"div",7),l(11,"Super Admin"),a(),n(12,"div",8),l(13),a()(),n(14,"button",6),g("click",function(){return r.fillDemoCredentials("ADMIN")}),n(15,"div",7),l(16,"Admin"),a(),n(17,"div",8),l(18),a()(),n(19,"button",6),g("click",function(){return r.fillDemoCredentials("VENDOR")}),n(20,"div",7),l(21,"Vendor"),a(),n(22,"div",8),l(23),a()(),n(24,"button",6),g("click",function(){return r.fillDemoCredentials("SUB_ADMIN")}),n(25,"div",7),l(26,"Sub Admin"),a(),n(27,"div",8),l(28),a()()()(),n(29,"form",9),g("ngSubmit",function(){return r.onSubmit()}),n(30,"div"),E(31,"app-input",10),a(),n(32,"div"),E(33,"app-input",11),a(),n(34,"div",12)(35,"label",13),E(36,"input",14),n(37,"span",15),l(38,"Remember me"),a()(),n(39,"a",16),l(40," Forgot password? "),a()(),n(41,"div")(42,"app-button",17),l(43," Sign In "),a()()(),n(44,"div",18)(45,"p",19),l(46," Don't have an account? "),n(47,"a",20),l(48," Contact Administrator "),a()()()),e&2&&(m(13),f(r.demoCredentials.SUPER_ADMIN.email),m(5),f(r.demoCredentials.ADMIN.email),m(5),f(r.demoCredentials.VENDOR.email),m(5),f(r.demoCredentials.SUB_ADMIN.email),m(),p("formGroup",r.loginForm),m(2),p("errorText",r.getFieldError("email"))("required",!0),m(2),p("type",r.showPassword?"text":"password")("errorText",r.getFieldError("password"))("required",!0),m(9),p("fullWidth",!0)("loading",r.loading)("disabled",r.loginForm.invalid||r.loading))},dependencies:[O,D,w,P,G,T,j,R,B,W],styles:[".login-form[_ngcontent-%COMP%]{transition:all .3s ease}.demo-credentials[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#8b5cf61a)}.demo-credential-item[_ngcontent-%COMP%]{transition:all .2s ease}.demo-credential-item[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 6px -1px #0000001a}.form-field[_ngcontent-%COMP%]{transition:all .3s ease}.form-field[_ngcontent-%COMP%]:focus-within{transform:scale(1.02)}.loading-overlay[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-5px)}20%,40%,60%,80%{transform:translate(5px)}}.form-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s ease-in-out}@keyframes _ngcontent-%COMP%_pulse-success{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.form-success[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-success .6s ease-in-out}"],changeDetection:0})};var Z=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:y}],S=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=V({type:s});static \u0275inj=v({imports:[F.forChild(Z),F]})};var K=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=V({type:s});static \u0275inj=v({imports:[M,q,S,X]})};export{K as AuthModule};
